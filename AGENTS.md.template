## ðŸŒŠ TIDE WATCH: Context Window Monitoring

**Proactive capacity management to prevent session lockups.**

**Monitoring schedule:** (customize or use default)
- Check frequency: **Every 1 hour** (options: 15min, 30min, 1hr, 2hr, or 'manual')
- Also check during **intensive project work** (reading many files, generating long outputs)
- Also check when I notice **unusually long conversations** accumulating

**Warning thresholds:** (customize or use defaults)
- **75%** (150k/200k): ðŸŸ¡ "Heads up: Context at 75%. Consider wrapping up or switching channels soon."
- **85%** (170k/200k): ðŸŸ  "Context at 85%. Recommend finishing current task and resetting session."
- **90%** (180k/200k): ðŸ”´ "Context at 90%! Session will lock at 100%. Ready to help you reset?"
- **95%** (190k/200k): ðŸš¨ "CRITICAL: Context at 95%! Save important info to memory NOW and reset."

**Auto-backup:** (customize or disable)
- Enabled: true  # Set false to disable all automatic backups
- Trigger at thresholds: [90, 95]  # Subset of warning thresholds
- Retention: 7 days
- Compress: false  # Set true to save disk space

To disable automatic backups entirely, set:
- Enabled: false

**Actions to suggest:**
1. **Memory save**: Offer to save current context/decisions to `memory/YYYY-MM-DD.md` or project work logs
2. **Channel switch**: Suggest moving to lower-usage session (webchat, DM, etc.)
3. **Session reset**: Provide reset command and context-restoration prompt
4. **File reference**: For project work, remind that docs persist in files

**Implementation:**
- Silent check (don't spam with status unless approaching threshold)
- Only warn once per threshold (track internally during session)
- At 90%+, be insistent but helpful
- Never let session hit 100% without warning

**Why this matters:** Proactive monitoring prevents lost work and frustration when sessions lock at capacity.

---

## ðŸ“‹ SESSION RESTORATION PROMPTS

**On session start or after reset:**

1. **Check for restoration prompt:**
   - Path: `~/.openclaw/agents/main/sessions/restore-prompts/<session-id>.md`
   - Alternative: `~/.openclaw/agents/main/sessions/restore-prompts/default.md`

2. **If restoration prompt exists:**
   - Check if enabled (no `.disabled` marker file)
   - Read the file contents
   - Apply the context from the prompt
   - Acknowledge restoration briefly: "âœ… Session restored from restoration prompt. Ready to continue [project]!"

3. **If no restoration prompt exists:**
   - Continue with normal session start (no error message)
   - Optionally suggest creating one (see feature discovery below)

**How to detect session start/reset:**
- First message of the session
- Token usage is very low (< 5,000 tokens)
- Session context is minimal/empty

**Restoration prompt location:**
`~/.openclaw/agents/main/sessions/restore-prompts/<session-id>.md`

**Check if enabled:**
- Enabled by default if prompt file exists
- Disabled if `.disabled` marker file exists: `<session-id>.md.disabled`

**Manual trigger (fallback):**

User can explicitly request restoration at any time:
- Triggers: "load my restoration prompt", "restore from prompt", "apply restoration prompt"
- Check for prompt file
- Check enabled/disabled state
- If disabled, ask: "This prompt is disabled. Load it anyway (one-time)?"
- Read and apply context
- Confirm what was restored

**Feature discovery:**

If session reset detected AND no restoration prompt exists:
- Briefly mention: "ðŸ’¡ Tip: You can create a restoration prompt to help me remember project context after resets. Interested?"
- If user agrees: Guide them through creation
- If user declines: Don't ask again this session
- Be helpful but not pushy (one mention per session)

**Skill**: [Tide Watch](https://github.com/chrisagiddings/openclaw-tide-watch) ðŸŒŠ
